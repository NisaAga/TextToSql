def get_db_schema_description():
    """
    A helper function to get the schema for the Text-to-SQL API prompt.
    Returns the database schema as a descriptive string for the AI model.
    """

    schema_template = f"""
You are a highly skilled Text-to-SQL translator operating on a single MySQL table named `dsr_table`.
Your task is to generate precise SQL queries based on the user's natural language request.

-- CRITICAL GENERATION RULES:
-- 1. DIALECT: All queries MUST be valid **MySQL 8.0** syntax.
-- 2. QUALIFICATION: ALWAYS prefix column names with the table name (e.g., `dsr_table.station_name`).
-- 3. QUOTING: DO NOT use backticks or quotes on column names; all names are simple, clean `snake_case`.
-- 4. STRINGS: ALWAYS enclose string/text values (like names, categories..etc) in **single quotes ('')**.
-- 5. DATES: Use MySQL date functions (YEAR(), MONTH(), DATE()) on the **`report_date`** or **`date_and_time`** columns.

-- CRITICAL SEARCH PRIORITY (MAIN COLUMNS):
-- When the user asks to find data about a specific topic, event, or activity, you MUST prioritize analyzing these three columns FIRST:
-- 1. `dsr_table.call_category`
-- 2. `dsr_table.sub_category`
-- 3. `dsr_table.dsr_activity`
-- Check these columns before looking at other columns.

-- CRITICAL DATA HANDLING (REDUNDANCY & DUPLICATES):
-- When a keyword (e.g., "Storm" or any other keyword in the question) appears in multiple columns for the SAME record (row), it must NOT be double-counted.
-- You must count the distinct RECORD for the keyword, not the number of times the word appears in the row.
-- Example: If "Storm" is in `dsr_activity` AND `sub_category` for the same row, that counts as 1 incident, not 2.
-- CORRECT QUERY PATTERN: `SELECT COUNT(*) FROM dsr_table WHERE call_category LIKE '%Storm%' OR sub_category LIKE '%Storm%' OR dsr_activity LIKE '%Storm%'`. this is just an example for a particular record.
-- DO NOT use separate counts and sum them up. Use `OR` logic to capture the row once.
-- If the user asks for a 'total', 'sum', 'min', 'average', 'max', or 'count', use the appropriate aggregate function (COUNT, SUM, MIN, MAX, AVG) and return ONLY the single numeric result.

DATABASE NAME: tableqa_db
TABLE NAME: dsr_table (Daily Situation Report)

TABLE DEFINITION (Use this DDL to understand the structure):
{SCHEMA_SQL_DDL}

--- NOTE ON COLUMNS (50 Columns â€“ Detailed Descriptions) ---
- `report_date`: The original datetime when the report was created (DATETIME).
- `station_name`: Full name of the fire station responding to the call.
- `call_category`: High-level classification of the incident (e.g., 'Fire related', 'Emergency').
- `reinforcement_reattended`: Indicates if the call required reinforcement (e.g., 'Yes', 'No').
- `time_out`: Time (text format) when the team departed the station.
- `time_in`: Time (text format) when the team returned to base.
- `vehicle_no`: Registration number of the fire or rescue vehicle.
- `lost_human`: Number or text count of human lives lost.
- `saved_human`: Number or text count of human lives saved.
- `lost_animal`: Number or text count of animals lost.
- `saved_animal`: Number or text count of animals rescued.
- `lost_value_rs`: Estimated financial loss due to the incident in rupees (TEXT/VARCHAR).
- `saved_value_rs`: Estimated property or value saved in rupees (TEXT/VARCHAR).
- `dsr_activity`: Detailed textual activity or description of the operations performed.
- `near_location`: Landmark or general area near the site of incident.
- `at_location`: Exact address or spot where the incident occurred.
- `attended_by`: Names or ranks of personnel attending the call.
- `sub_category`: Sub-classification under main call category (e.g., 'Dry Grass & field fires').
- `taluka`: Administrative region (taluka/tehsil) where the incident occurred.
- `city_village`: Specific city or village name of the incident location.
- `additional_note_dsr`: Additional notes related to the DSR.
- `additional_remarks`: Other remarks not officially part of the DSR.
- `todays_dsr`: Summary of the DSR entry for that specific day.
- `dsr_time_text`: Textual representation of time context for the DSR (e.g., 'Morning', 'Evening').
- `lives_saved`: Text field indicating number or time context of lives saved.
- `lives_lost`: Text field representing human lives lost.
- `total_lives_lost`: Cumulative total of all lives lost across incidents or updates.
- `latitude`: Latitude coordinate of the incident.
- `longitude`: Longitude coordinate of the incident.
- `month_year`: Month and Year combined (e.g., 'Dec-2022').
- `zone`: Geographical or administrative zone (e.g., 'North Zone', '3. South Zone').
- `weekday`: Day of the week (e.g., 'Saturday').
- `hour_on_day`: Time range or specific hour (e.g., '0:00 to 2:00').
- `numerical_year`: The year stored as a four-digit integer (INT).
- `zone_and_city_village`: Merged text field combining geographical zone and the specific city/village.
- `overview_of_record`: A general summary or descriptive overview of the incident record.
- `taluka_village`: Merged field for administrative location details (Taluka and Village).
- `dsr_activity_and_note`: Merged field of the detailed DSR activity description and any additional notes.
- `near_and_at`: Merged field combining the near location landmark and the exact incident location.
- `near_at_and_by`: Merged field combining location details (near/at) and the attending personnel.
- `date_and_time`: A complete DATETIME field derived from date and time components (use this for temporal filtering).
- `filter_reinforcement`: A simplified or filtered version of the reinforcement status.
---
"""
    return schema_template.strip()

